!function(t,e,a){"undefined"!=typeof module?module.exports=a():"function"==typeof define&&"object"==typeof define.amd?define(a):e[t]=a()}("domready",this,function(t){function e(t){for(m=1;t=n.shift();)t()}var a,n=[],r=!1,i=document,o=i.documentElement,d=o.doScroll,s="DOMContentLoaded",l="addEventListener",_="onreadystatechange",c="readyState",m=/^loade|c/.test(i[c]);return i[l]&&i[l](s,a=function(){i.removeEventListener(s,a,r),e()},r),d&&i.attachEvent(_,a=function(){/^c/.test(i[c])&&(i.detachEvent(_,a),e())}),t=d?function(e){self!=top?m?e():n.push(e):function(){try{o.doScroll("left")}catch(a){return setTimeout(function(){t(e)},50)}e()}()}:function(t){m?t():n.push(t)}});var JSONP=function(){function t(t,e){var a=document.createElement("script"),n=!1;a.src=t,a.async=!0;var i=e||d.error;"function"==typeof i&&(a.onerror=function(e){i({url:t,event:e})}),a.onload=a.onreadystatechange=function(){n||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(n=!0,a.onload=a.onreadystatechange=null,a&&a.parentNode&&a.parentNode.removeChild(a))},r||(r=document.getElementsByTagName("head")[0]),r.appendChild(a)}function e(t){return encodeURIComponent(t)}function a(a,n,r,s){var l,_=-1===(a||"").indexOf("?")?"?":"&";s=s||d.callbackName||"callback";var c=s+"_json"+ ++i;n=n||{};for(l in n)n.hasOwnProperty(l)&&(_+=e(l)+"="+e(n[l])+"&");return o[c]=function(t){r(t);try{delete o[c]}catch(e){}o[c]=null},t(a+_+s+"="+c),c}function n(t){d=t}var r,i=0,o=this,d={};return{get:a,init:n}}();window.MTN=window.MTN||{},MTN._getAttr=function(t,e){return t&&t.attributes&&t.attributes[e]?t.getAttribute(e):!1},MTN._resolved_host="",MTN._resolve_host=function(){if(MTN._resolved_host)return MTN._resolved_host;var t,e=document.getElementsByTagName("script");for(t=0;t<e.length;t++){var a=e.item(t);if(a.src&&a.src.match(/platform.*meetin\.gs\/mtn.*js$/)){a.src.match(/platform\-dev/)&&(MTN._resolved_host="https://platform-dev.meetin.gs");break}}return MTN._resolved_host||(MTN._resolved_host="https://platform.meetin.gs"),MTN._resolved_host},MTN._generateIframeUrl=function(t){return encodeURI(MTN._resolve_host()+"/button.html?u="+(t.user||"")+"&url="+(t["Meet Me URL"]||"")+"&s="+(t.scheduler||"")+"&c="+(t.color||"")+"&t="+(t.type||"")+"&m="+(t.mode||"")+"&i_n="+(t.name||(t["First name"]&&t["Last name"]?t["First name"]+" "+t["Last name"]:t["First name"]||t["Last name"])||"")+"&i_o="+(t.organization||t.Organization||"")+"&i_t="+(t.title||t.Title||"")+"&i_i="+(t.image||t["Image URL"]||"")+"&d_i="+(t.disable_image||"")+"&d_f="+(t.disable_first_name||"")+"&d_l="+(t.disable_last_name||"")+"&d_t="+(t.disable_title||"")+"&d_n="+(t.disable_name||"")+"&d_o="+(t.disable_organization||"")+"&t="+(t.name||"")+"&r="+window.location.href)},MTN.init=function(t){MTN.app_id=MTN._getAttr(document.getElementById("mtn_script"),"data-api-key"),MTN.disable_unregistered=MTN._getAttr(document.getElementById("mtn_script"),"data-disable-unregistered"),MTN.current_user_token=MTN._getAttr(document.getElementById("mtn_script"),"data-current-user-token"),t&&"function"==typeof t.custom_user_data_received_handler&&(MTN.custom_user_data_received_handler=t.custom_user_data_received_handler);var e,a,n,r=document.getElementsByTagName("script"),i=r.length,o=[];for(e=0;i>e;e++)n=MTN._getAttr(r[e],"type"),("MTN/button"===n||"MTN/list"===n||"MTN/app"===n)&&o.push(r[e]);var d=o.length;for(a=0;d>a;a++)"MTN/list"===MTN._getAttr(o[a],"type")?MTN._initList(o[a]):MTN._initButton(o[a])},MTN._createButtonIframe=function(t){var e=document.createElement("iframe");return e.setAttribute("src",MTN._generateIframeUrl(t)),e.setAttribute("scrolling","no"),e.setAttribute("frameborder","0"),e.setAttribute("hspace","0"),e.setAttribute("marginheight","0"),e.setAttribute("marginwidth","0"),"full"===t.mode?(e.style.height="220px",e.style.width="160px"):(e.style.height="35px",e.style.width="schedule"===t.type?"86px":"116px"),e.style.border="0px",e.style.overflow="hidden",e},MTN._initButton=function(t,e){e=e||MTN._getOptionsFromEl(t),e.email||e.token?JSONP.get(MTN._resolve_host()+"/apigw/v1/meetme/"+(e.email||e.token),{app_id:MTN.app_id},function(a){"function"==typeof MTN.custom_user_data_received_handler?MTN.custom_user_data_received_handler(t,a,a.TOKEN===MTN.current_user_token?1:0):"full"===e.mode?(e.image=a["Image URL"],e.name=a["First name"]+" "+a["Last name"],e.title=a.Title,e.organization=a.Organization,e["Meet Me URL"]=a["Meet Me URL"],t.parentNode.replaceChild(MTN._createButtonIframe(e),t)):(e["Meet Me URL"]=a["Meet Me URL"],t.parentNode.replaceChild(MTN._createButtonIframe(e),t))}):t.parentNode.replaceChild(MTN._createButtonIframe(e),t)},MTN._initList=function(t){var e=MTN._getOptionsFromEl(t),a=document.createElement("div");a.className="mtn_list_wrapper",t.parentNode.replaceChild(a,t),JSONP.get(MTN._resolve_host()+"/apigw/v1/meetme",{app_id:MTN.app_id,match:e.match},function(t){var e,n,r=t.length;for(n=0;r>n;n++)"function"!=typeof MTN.custom_user_data_received_handler?t[n].NOPRELOAD?(e=document.createElement("script"),e.attributes["data-type"]="MTN/app",e.attributes["data-token"]=t[n].TOKEN,a.appendChild(e),function(t,e){MTN._initButton(t,{mode:"full",token:e,type:"gallery"})}(e,t[n].TOKEN)):(t[n].mode="full",a.appendChild(MTN._createButtonIframe(t[n]))):(e=document.createElement("script"),a.appendChild(e),MTN.custom_user_data_received_handler(e,t[n],t[n].TOKEN===MTN.current_user_token?1:0))})},MTN._getOptionsFromEl=function(t){return{user:MTN._getAttr(t,"data-user")||"",scheduler:MTN._getAttr(t,"data-scheduler")||"",type:MTN._getAttr(t,"data-type")||"meetme",mode:MTN._getAttr(t,"data-mode")||"button",color:MTN._getAttr(t,"data-color")||"blue",name:MTN._getAttr(t,"data-name")||"",image:MTN._getAttr(t,"data-imgage")||"",title:MTN._getAttr(t,"data-title")||"",organization:MTN._getAttr(t,"data-organization")||"",email:MTN._getAttr(t,"data-email")||"",token:MTN._getAttr(t,"data-token")||"",disable_organization:MTN._getAttr(t,"data-disable-organization ")||"",disable_image:MTN._getAttr(t,"data-disable-image")||"",disable_title:MTN._getAttr(t,"data-disable-title")||"",disable_name:MTN._getAttr(t,"data-disable-name")||"",disable_first_name:MTN._getAttr(t,"data-disable-first-name")||"",disable_last_name:MTN._getAttr(t,"data-disable-last-name")||"",match:MTN._getAttr(t,"data-match")||""}},domready(function(){MTN._getAttr(document.getElementById("mtn_script"),"data-disable-autoinit")||MTN.init()});